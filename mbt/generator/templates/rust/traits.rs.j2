// Code generated by fizzbee-mbt generator; DO NOT EDIT.

use fizzbee_mbt::error::MbtError;
use fizzbee_mbt::traits::*;
use fizzbee_mbt::types::Arg;
use fizzbee_mbt::value::Value;
use std::sync::Arc;
use async_trait::async_trait;

// Role traits
{% for role in file.roles %}
#[async_trait]
pub trait {{ role.name }}Role: AsyncRole {
    {%- for action in role.actions %}
    {%- if action.name != "Init" %}
    async fn action_{{ action.name|lower }}(&self, args: &[Arg]) -> Result<Value, MbtError>;
    {%- endif %}
    {%- endfor %}
}
{% endfor %}

// Model trait
pub trait {{ model_name }}Model: Model {
    {%- for role in file.roles %}
    // R{{ loop.index0 }} is the trait for the {{ role.name }}Role
    type R{{ loop.index0 }}: {{ role.name }}Role;
    fn get_{{ role.name|lower }}_roles(&self) -> Result<Vec<Arc<Self::R{{ loop.index0 }}>>, MbtError>;
    {%- endfor %}

    // Top-level actions
    {%- for action in file.actions %}
    {%- if action.name != "Init" %}
    async fn action_{{ action.name|lower }}(&self, args: &[Arg]) -> Result<Value, MbtError>;
    {%- endif %}
    {%- endfor %}
}